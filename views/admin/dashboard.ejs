<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %> - Admin Panel</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .sidebar { transition: transform 0.3s ease-in-out; }
        .sidebar.collapsed { transform: translateX(-100%); }
        .main-content { transition: margin-left 0.3s ease-in-out; }
        .main-content.expanded { margin-left: 0; }
    </style>
</head>
<body class="bg-gray-100">
    <!-- Header -->
    <header class="bg-white shadow-sm border-b border-gray-200 fixed top-0 left-0 right-0 z-50">
        <div class="flex items-center justify-between px-6 py-4">
            <div class="flex items-center">
                <button id="sidebarToggle" class="text-gray-500 hover:text-gray-700 mr-4">
                    <i class="fas fa-bars text-xl"></i>
                </button>
                <h1 class="text-2xl font-bold text-gray-900"><%= title %></h1>
            </div>
            <div class="flex items-center space-x-4">
                <a href="/admin/dashboard" class="text-blue-600 font-medium">
                    <i class="fas fa-tachometer-alt mr-2"></i>Dashboard
                </a>
                <a href="/admin/logout" class="text-red-600 hover:text-red-800">
                    <i class="fas fa-sign-out-alt mr-2"></i>Logout
                </a>
            </div>
        </div>
    </header>

    <!-- Sidebar -->
    <aside id="sidebar" class="sidebar fixed top-16 left-0 h-full w-64 bg-white shadow-lg z-40">
        <nav class="mt-8">
            <div class="px-4 py-2">
                <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider">Management</h3>
            </div>
            <% if (typeof routes !== 'undefined' && routes.length > 0) { %>
                <% routes.forEach(route => { %>
                    <a href="<%= route.path %>" class="flex items-center px-4 py-3 text-gray-700 hover:bg-gray-100 hover:text-gray-900">
                        <i class="<%= route.icon %> mr-3"></i>
                        <span><%= route.name %></span>
                    </a>
                <% }); %>
            <% } else { %>
                <!-- Fallback static routes if dynamic routes are not available -->
                <a href="/admin/users" class="flex items-center px-4 py-3 text-gray-700 hover:bg-gray-100 hover:text-gray-900">
                    <i class="fas fa-users mr-3"></i>
                    <span>Users</span>
                </a>
                <a href="/admin/products" class="flex items-center px-4 py-3 text-gray-700 hover:bg-gray-100 hover:text-gray-900">
                    <i class="fas fa-box mr-3"></i>
                    <span>Products</span>
                </a>
                <a href="/admin/blogs" class="flex items-center px-4 py-3 text-gray-700 hover:bg-gray-100 hover:text-gray-900">
                    <i class="fas fa-blog mr-3"></i>
                    <span>Blogs</span>
                </a>
                <a href="/admin/orders" class="flex items-center px-4 py-3 text-gray-700 hover:bg-gray-100 hover:text-gray-900">
                    <i class="fas fa-shopping-cart mr-3"></i>
                    <span>Orders</span>
                </a>
                <a href="/admin/categories" class="flex items-center px-4 py-3 text-gray-700 hover:bg-gray-100 hover:text-gray-900">
                    <i class="fas fa-tags mr-3"></i>
                    <span>Categories</span>
                </a>
            <% } %>
            
            <!-- Route Management Section -->
            <div class="px-4 py-2 mt-6">
                <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider">Route Management</h3>
            </div>
            <a href="/admin/routes" class="flex items-center px-4 py-3 text-gray-700 hover:bg-gray-100 hover:text-gray-900">
                <i class="fas fa-route mr-3"></i>
                <span>Manage Routes</span>
            </a>
            <a href="/admin/routes/create" class="flex items-center px-4 py-3 text-gray-700 hover:bg-gray-100 hover:text-gray-900">
                <i class="fas fa-plus mr-3"></i>
                <span>Create Route</span>
            </a>
        </nav>
    </aside>

    <!-- Main Content -->
    <main id="mainContent" class="main-content ml-64 mt-16 p-6">
        <!-- Welcome Section -->
        <div class="mb-8">
            <h2 class="text-3xl font-bold text-gray-900">Welcome to Admin Panel</h2>
            <p class="text-gray-600">Manage your application data and monitor system activity</p>
        </div>

        <!-- Statistics Cards -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-8">
            <!-- Users Stats -->
            <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <div class="w-8 h-8 bg-blue-500 rounded-md flex items-center justify-center">
                            <i class="fas fa-users text-white text-sm"></i>
                        </div>
                    </div>
                    <div class="ml-4">
                        <p class="text-sm font-medium text-gray-500">Total Users</p>
                        <p class="text-2xl font-semibold text-gray-900"><%= stats.users %></p>
                    </div>
                </div>
                <div class="mt-4">
                    <a href="/admin/users" class="text-blue-600 hover:text-blue-800 text-sm font-medium">
                        View Users →
                    </a>
                </div>
            </div>

            <!-- Products Stats -->
            <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <div class="w-8 h-8 bg-green-500 rounded-md flex items-center justify-center">
                            <i class="fas fa-box text-white text-sm"></i>
                        </div>
                    </div>
                    <div class="ml-4">
                        <p class="text-sm font-medium text-gray-500">Total Products</p>
                        <p class="text-2xl font-semibold text-gray-900"><%= stats.products %></p>
                    </div>
                </div>
                <div class="mt-4">
                    <a href="/admin/products" class="text-green-600 hover:text-green-800 text-sm font-medium">
                        View Products →
                    </a>
                </div>
            </div>

            <!-- Blogs Stats -->
            <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <div class="w-8 h-8 bg-purple-500 rounded-md flex items-center justify-center">
                            <i class="fas fa-blog text-white text-sm"></i>
                        </div>
                    </div>
                    <div class="ml-4">
                        <p class="text-sm font-medium text-gray-500">Total Blogs</p>
                        <p class="text-2xl font-semibold text-gray-900"><%= stats.blogs %></p>
                    </div>
                </div>
                <div class="mt-4">
                    <a href="/admin/blogs" class="text-purple-600 hover:text-purple-800 text-sm font-medium">
                        View Blogs →
                    </a>
                </div>
            </div>

            <!-- Orders Stats -->
            <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <div class="w-8 h-8 bg-yellow-500 rounded-md flex items-center justify-center">
                            <i class="fas fa-shopping-cart text-white text-sm"></i>
                        </div>
                    </div>
                    <div class="ml-4">
                        <p class="text-sm font-medium text-gray-500">Total Orders</p>
                        <p class="text-2xl font-semibold text-gray-900"><%= stats.orders %></p>
                    </div>
                </div>
                <div class="mt-4">
                    <a href="/admin/orders" class="text-yellow-600 hover:text-yellow-800 text-sm font-medium">
                        View Orders →
                    </a>
                </div>
            </div>

            <!-- Categories Stats -->
            <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <div class="w-8 h-8 bg-red-500 rounded-md flex items-center justify-center">
                            <i class="fas fa-tags text-white text-sm"></i>
                        </div>
                    </div>
                    <div class="ml-4">
                        <p class="text-sm font-medium text-gray-500">Total Categories</p>
                        <p class="text-2xl font-semibold text-gray-900"><%= stats.categories %></p>
                    </div>
                </div>
                <div class="mt-4">
                    <a href="/admin/categories" class="text-red-600 hover:text-red-800 text-sm font-medium">
                        View Categories →
                    </a>
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8">
            <h3 class="text-lg font-medium text-gray-900 mb-4">Quick Actions</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                <a href="/admin/users/create" class="flex items-center p-4 bg-blue-50 rounded-lg hover:bg-blue-100 transition duration-200">
                    <i class="fas fa-user-plus text-blue-600 mr-3"></i>
                    <span class="text-blue-800 font-medium">Add User</span>
                </a>
                <a href="/admin/products/create" class="flex items-center p-4 bg-green-50 rounded-lg hover:bg-green-100 transition duration-200">
                    <i class="fas fa-plus text-green-600 mr-3"></i>
                    <span class="text-green-800 font-medium">Add Product</span>
                </a>
                <a href="/admin/blogs/create" class="flex items-center p-4 bg-purple-50 rounded-lg hover:bg-purple-100 transition duration-200">
                    <i class="fas fa-edit text-purple-600 mr-3"></i>
                    <span class="text-purple-800 font-medium">Create Blog</span>
                </a>
                <a href="/admin/categories/create" class="flex items-center p-4 bg-red-50 rounded-lg hover:bg-red-100 transition duration-200">
                    <i class="fas fa-tag text-red-600 mr-3"></i>
                    <span class="text-red-800 font-medium">Add Category</span>
                </a>
            </div>
        </div>

        <!-- Recent Activity -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- Recent Users -->
            <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-medium text-gray-900">Recent Users</h3>
                    <a href="/admin/users" class="text-blue-600 hover:text-blue-800 text-sm">View All</a>
                </div>
                <div class="space-y-3">
                    <% if (recentActivity.users && recentActivity.users.length > 0) { %>
                        <% recentActivity.users.forEach(user => { %>
                            <div class="flex items-center space-x-3">
                                <div class="flex-shrink-0">
                                    <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center">
                                        <i class="fas fa-user text-blue-600 text-sm"></i>
                                    </div>
                                </div>
                                <div class="flex-1 min-w-0">
                                    <p class="text-sm font-medium text-gray-900 truncate"><%= user.name %></p>
                                    <p class="text-sm text-gray-500"><%= user.email %></p>
                                </div>
                                <div class="text-xs text-gray-400">
                                    <%= new Date(user.createdAt).toLocaleDateString() %>
                                </div>
                            </div>
                        <% }); %>
                    <% } else { %>
                        <p class="text-gray-500 text-sm">No recent users</p>
                    <% } %>
                </div>
            </div>

            <!-- Recent Products -->
            <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-medium text-gray-900">Recent Products</h3>
                    <a href="/admin/products" class="text-green-600 hover:text-green-800 text-sm">View All</a>
                </div>
                <div class="space-y-3">
                    <% if (recentActivity.products && recentActivity.products.length > 0) { %>
                        <% recentActivity.products.forEach(product => { %>
                            <div class="flex items-center space-x-3">
                                <div class="flex-shrink-0">
                                    <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center">
                                        <i class="fas fa-box text-green-600 text-sm"></i>
                                    </div>
                                </div>
                                <div class="flex-1 min-w-0">
                                    <p class="text-sm font-medium text-gray-900 truncate"><%= product.name %></p>
                                    <p class="text-sm text-gray-500">$<%= product.price %></p>
                                </div>
                                <div class="text-xs text-gray-400">
                                    <%= new Date(product.createdAt).toLocaleDateString() %>
                                </div>
                            </div>
                        <% }); %>
                    <% } else { %>
                        <p class="text-gray-500 text-sm">No recent products</p>
                    <% } %>
                </div>
            </div>

            <!-- Recent Orders -->
            <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-medium text-gray-900">Recent Orders</h3>
                    <a href="/admin/orders" class="text-yellow-600 hover:text-yellow-800 text-sm">View All</a>
                </div>
                <div class="space-y-3">
                    <% if (recentActivity.orders && recentActivity.orders.length > 0) { %>
                        <% recentActivity.orders.forEach(order => { %>
                            <div class="flex items-center space-x-3">
                                <div class="flex-shrink-0">
                                    <div class="w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center">
                                        <i class="fas fa-shopping-cart text-yellow-600 text-sm"></i>
                                    </div>
                                </div>
                                <div class="flex-1 min-w-0">
                                    <p class="text-sm font-medium text-gray-900 truncate"><%= order.order_number %></p>
                                    <p class="text-sm text-gray-500">$<%= order.total_amount %></p>
                                </div>
                                <div class="text-xs text-gray-400">
                                    <%= new Date(order.createdAt).toLocaleDateString() %>
                                </div>
                            </div>
                        <% }); %>
                    <% } else { %>
                        <p class="text-gray-500 text-sm">No recent orders</p>
                    <% } %>
                </div>
            </div>
        </div>

        <!-- System Info -->
        <div class="mt-8 bg-white rounded-lg shadow-sm border border-gray-200 p-6">
            <h3 class="text-lg font-medium text-gray-900 mb-4">System Information</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                <div>
                    <p class="text-gray-600">Server Time: <span class="text-gray-900"><%= new Date().toLocaleString() %></span></p>
                    <p class="text-gray-600">Environment: <span class="text-gray-900">Development</span></p>
                </div>
                <div>
                    <p class="text-gray-600">Database: <span class="text-gray-900">MongoDB</span></p>
                    <p class="text-gray-600">Framework: <span class="text-gray-900">Node.js + Express</span></p>
                </div>
            </div>
        </div>
    </main>

    <script>
        // Sidebar toggle
        const sidebar = document.getElementById('sidebar');
        const mainContent = document.getElementById('mainContent');
        const sidebarToggle = document.getElementById('sidebarToggle');
        
        sidebarToggle.addEventListener('click', () => {
            sidebar.classList.toggle('collapsed');
            mainContent.classList.toggle('expanded');
        });

        // Auto-refresh dashboard every 30 seconds
        setInterval(() => {
            // You can add AJAX calls here to refresh data
            console.log('Dashboard auto-refresh');
        }, 30000);
    </script>
</body>
</html>
